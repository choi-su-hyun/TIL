# 2024년 2월 ~ 6월  

## 2월 3일

### 작업  
 탭구현 및 뒤로가기 설정
 
### 문제점 발견 및 해결
탭 내부의 내용을 클릭한 후 뒤로가기 했을때 기존에 사용하고 있던 탭이 아닌 초기 탭으로 돌아가는 문제에 직면했다.   
(예 : 두번째 탭에서 링크로 인한 페이지 전환 후 뒤로가기 했을때 첫번째 탭이 열려있어 사용자의 불편을 초래했다)   

  - 해결   
  url에 Query String을 삽입을 통해 해결했다. router의 replace를 이용해 탭 클릭 시 현재의 history에 url을 남겨주면서 뒤로가기 했을때 되돌아갈 수 있도록 했다.

### 배운점   
탭의 종류가 2 가지인 것 같다.
1. 탭을 사용 후 뒤로가기 했을 때 탭을 사용하기 전으로 이동
2. 뒤로가기 했을 때 이전 탭으로 이동

- router의 replace를 통해 웹 hitory에 남기며 이동하는 것이 아니라 현재 url을 교체 할 수 있다.
- query string을 이용해 페이지의 정보를 저장하고 웹 history를 이용해 뒤로가기 했을 때 원하는 페이지의 형태를 유지할 수 있다.
- query string만 골라서 받아올 수 가 있다.
```
const params = new URLSearchParams(url정보);
const tabFromQueryString = params.get('tab');
```

## 2월 5일

### 작업  
emotion styled 컴포넌트 props를 이용한 스타일 작업
 
### 문제점 발견 및 해결
props 이름을 display로 하여 해당 컴포넌트의 display를 컨트롤하는 구조를 제작했다. 하지만 attribute 관련 경고가 발생했다.   
문제는 display라는 속성이 실제로 존재하는데 그 속성을 props로 사용하다보니 해당 속성 값에 문자열 값이 아닌 boolean 값이 들어가서 일어나는 경고였다.   


  - 해결   
  기존의 속성을 props의 이름으로 사용하지 않으니 자연스럽게 해결되었다.

### 배운점   
typescript 입장에서도 기존에 존재하는 속성과 헷갈리기 때문에 기존의 속성을 props로 사용해서는 안된다는 것을 알 수 있었다.

## 2월 6일

### 작업  
Html로 작성되는 글을 클라이언트에서 렌더링
 
### 문제점 발견 및 해결
html 태그로 작성해두고 그 안에 서버에서 전달받은 html 문서를 전달하면 구현이 가능할 것이라고 생각했지만 다른 설정이 필요했다.   
(html 내에서 html 태그를 다시 사용하는 것은 좋지 않다는 경고문도 나타났다)


  - 해결
    dangerouslySetInnerHTML 라는 속성을 이용해야한다. __html이라는 키를 이용해야하며, 값으로 렌더링하고 싶은 html 문서를 전달해주니 정상적으로 html을 렌더링했다.
  ```
  dangerouslySetInnerHTML={{ __html: chartHeroSampleData.expertRecord || '' }}
```

### 배운점   
html 문서를 렌더링해주는 동시에 조심해야할 것이 있었다. 작성하는 작성란에 script를 작성한다면 html 문서이기 때문에 당연히 해당 스크립트를 작동시키게 된다.   
(CSXX를 대비하는 작업이 필요하다 추후 해당 부분 작업 시 학습하여 추가해둘 예정이다.)

## 2월 8일

### 작업  
scroll spy 작업
 
### 문제점 발견 및 해결
1. react-scroll 라이브러리를 통해 스크롤 이동까지는 작업이 되었으나 spy쪽에서 렌더링 후 작동이 되지 않아 수동으로 작동시켜야했다.(scrollSpy.update()를 useEffect()에서 실행시켜봤지만 해결되지 않았다)
2. 헤더로 인해 spy가 일어나는 인식 범위를 위쪽으로 더 늘려야하는 문제로 인해 각 목표개체의 인식 범위의 Y축을 낮춰보았지만 계산 오류인지 인식이 왔다갔다하는 문제가 발생했다.

  - 해결
    1. 현재 위치를 나타내기 위한 state(상세페이지 현재 탭 저장)를 통해 현재의 탭을 관리한다.
       목표개체의 id를 가져온다.(각각의 개체를 map과 같은 반복문을 통해 id를 가져온다)
       현재 스크롤의 위치와 목표물의 위치를 비교해서 화면의 상단과 위치가 맞물렸을 때 현재의 탭을 해당 탭으로 변경시킨다.
    2. 헤더로 인해 가려지는 부분을 고려해서 인식 범위를 더 키우기 위해 각 탭에게 인식 범위를 더 키워주었지만 이 부분으로 인해 인식이 왔다갔다하는 문제가 발생했었고,

### 배운점   
반복문을 통해 각각의 개체마다 현재 위치를 배열로 저장하여 관리하면 여러 개체의 높이 정보와 같은 중요 정보들을 더 간단하게 저장하고 관리할 수 있다.   
인식 범위를 늘리기 위해 각 개체의 현재 위치를 조정하는 것이 아니라 현재 스크롤의 위치를 조정하는 것이 브라우저가 인식하기에 더 좋다.   
(탭이 여러 개일 경우 각각의 탭마다 현재 위치를 변경하는 것은 비효율적이기도 하다.)

## 2월 10일

### 작업  
작성란에 한글 글자 작성 제한 작업
 
### 문제점 발견 및 해결
글자를 제한 하는 것은 input의 value 값의 길이를 조건으로 하여 제작할 수 있었다. 하지만 한글만 작성하는 부분은 정규식을 사용해야했다.

  - 해결
    영어를 인식하는 정규식을 통해 replace 메소드를 사용하여 현재 작성되는 value를 변경했다. input에 value를 state 값으로 작성해두었기 때문에 해당 state에 정규식으로 변경시킨 결과물이 작성되도록 했다.

### 배운점   
maxLength를 통해서 제한 할 수 있지만 한글은 적용되지 않을 뿐더러 form의 onSubmit 함수를 통해 데이터를 전송하는 것이 아니라면 검사가 되지 않는다고 한다.   
이 때문에 onChange에 조건문을 통해 제한을 거는 방식으로 작업해야한다.   
한글 정규식은 자음과 모음도 모두 판별할 수 있도록 작성해주어야하며, []를 이용해 해당 요소중 하나라도 있을 경우 작동되도록 해야한다.

## 2월 22일

### 작업  
정렬 함수 모듈화(제네릭 타입 설정)
 
### 문제점 발견 및 해결
함수를 분리해야했지만 타입 설정도 필요했다. 타입이 매개변수에 들어가는 값에 따라 변동되어 타입에 대해 추가 설정이 필요했다.

  - 해결
    제네릭을 사용해 타입을 변수로 넣어줄 수 있도록 했다. 받는 data가 객체일 때 키값을 설정하기 위해 아래와 같이 설정했다.
    ```
    export const alignOrderByDate = <T, K extends keyof T>(data: T[] | undefined, key: K,): T[] | void => {
      if (data == undefined) return;
      return data.sort((a: T, b: T) => {
       return new Date(String(a[key])).getTime() - new Date(String(b[key])).getTime();
      }).reverse();
    };
    ```

### 배운점   
extends를 통해 객체에서 값을 확장할 수 있었으며, keyof를 통해 들어올 객체의 키값을 설정할 수 있었다. 하지만 해당 키값을 매개변수를 통해 따로 받는 작업이 필요했다.   
또한 점표기법이 아닌 []표기법을 이용해야했다. 찾아보니 객체의 키값을 변수로 사용하는 경우 []표기법을 이용해 구성이 가능했다.(computed property)   
객체['문자열']과 같은 방법으로 키를 구성한다는 개념을 기억해둬야겠다.

## 2월 23일

### 작업  
카카오/다음 주소 찾기 모달로 작동시키기
 
### 문제점 발견 및 해결
기존의 팝업은 데스크 탑에서 사용할 수 있지만 모바일의 경우 모달 형태로 사용하기 위해 모달로 변경해야했지만 주소 api를 한 번 사용 후 다시 열 때 나타나지 않는 문제가 발생했다.   

  - 해결
    useState를 이용해 true, false로 해당 모달 자체를 재랜더링 시켜 해결했다. 포인트는 주소 api는 기존 방식이 한 번 사용 후 제거되기 때문에 다시 사용해야할 경우에는 다시 생성되도록 해주면 된다.
```
   {modalState && (
        <Modal>
          <DaumPostcodeEmbed onComplete={handleComplete} />
        </Modal>
      )}
```

### 배운점   
제거되는 컴포넌트가 있다면 boolean값을 통해 재생성해주어야 다시 사용할 수 있다.

## 3월 9일

### 작업  
컨텐츠 크기와 상관없이 footer를 아래에 배치시키기.
 
### 문제점 발견 및 해결
기본적으로 컨텐츠의 양에 따라 footer가 애매하게 가운데에 떠있는 현상이 발생했다. 사이트를 어색하게 보이는 원인으로 수정이 필요했지만 footer가 있는 곳도 존재하고 없는 곳도 존재하는 사이트 였기 때문에 조건문 또한 필요했다.   

  - 해결
    레이아웃에 css를 이용해 화면의 높이를 크기로 잡았고, flex의 space-between을 이용해 footer를 아래로 배치했다.
    조건문을 통해 footer가 없는 경우에는 하단에 'div' 하나를 생성해주었다.
  

### 배운점   
footer를 하단에 배치시켜야할 때 높이를 vh로 잡고 space-between을 통해 배치할 수 있다. 만약 적은 컨텐츠에서 푸터가 필요할 경우 푸터를 제외한 컨텐츠에서 calc를 이용해 100vh에서 footer를 제거한 높이를 사용하면 된다.   
(예 height: calc(100vh - 6.4rem) 여기서 6.4rem은 푸터의 높이다.)

## 3월 13일

### 작업  
하단 메뉴바를 배치한 곳에만 하단에 메뉴바 만큼 여백 생성하기
 
### 문제점 발견 및 해결
메뉴바를 하단에 fixed로 배치하면서 하단에 가려지는 부분이 발생했고 하단에 여백을 넣어야 했지만 하단에 있는 개체가 페이지마다 달라서 일일이 넣어주거나 다른 방법이 필요했다.

  - 해결
    body태그에 여백을 주는 방법을 통해 개체와 관계없이 하단에 여백을 생성했고, 해당 컴포넌트 자체에서 body태그에 여백을 주는 코드를 작성하여 문제를 해결했다.
  

### 배운점   
body태그를 이용하면 개체와 상관없이 하단에 여백을 넣을 수 있고, 컴포넌트당 원하는 여백을 넣고 싶다면 해당 컴포넌트에서 useEffect를 이용해 여백을 만들어 넣어주고 return을 통해 제거해주면 된다.

## 3월 21일

### 작업  
query string을 통해 데이터 불러오기 (tanstack query이용)
 
### 문제점 발견 및 해결
필터를 제작하는 도중 query string을 통해 이전 검색 기록을 저장해야하는데 클릭을 하지 않았을때는 전체 값이 나오고, 조건을 모두 입력한 후 '검색을 했을 때' 데이터를 불러와야하는 문제가 발생했다.

  - 해결
    tanstack query의 기능중 enabled라는 속성을 통해 직접 refetch하기 전에는 데이터를 불러오지 않도록 했다. 하지만 처음에는 전체목록을 호출해야하기 때문에 useEffect를 이용해 refetch하여 문제를 해결했다.
  

### 배운점   
- enabled라는 속성을 통해 데이터를 불러오고 싶을 때 선택적으로 불러올 수 있다.
- refetch를 이용하여 api를 다시 호출 할 수 있다.

## 3월 23일

### 작업  
테이블의 순서를 바꾸고 바꾼 값의 pk를 서버에 전달시켜서 DB를 변경하여 순서를 바꾸기
 
### 문제점 발견 및 해결
테이블의 데이터는 tanstack query를 통해 서버에서 지속적으로 받고 있는 데이터였다. 그 데이터의 순서를 변경한 후 저장 버튼을 통해 서버에 전송하거나 저장하지 않고 취소 할 수 있어야해서 다른 데이터에 담아서 보여주는 방식이 필요했다.   


  - 해결
    - db에 저장되지 않더라도 순서가 바뀌는 것을 사용자가 볼 수 있어야 했기 때문에 리렌더링이 되는 구조로 작업해야했다. 그래서 state에 현재 테이블을 저장했다.
    - 진짜 데이터와 순서를 변경하는 저장된 데이터를 가지고 있는 구조로 제작하여 순서편집 모드를 담당하는 state를 통해 데이터를 변경해서 보여주었다.(map함수를 사용할 변수를 괄호로 묶어서 삼항연산자로 처리하면 원하는 데이터를 map으로 돌릴 수 있다)
    - 순서를 원하는대로 바꿔주는 함수를 통해 원하는 순서를 바꿔주었고 여기서 순서를 바꾸면 선택한 데이터의 index도 바뀌지만 처음 선택할 때 입력된 index는 바뀌는 않는다는 또 하나의 문제점이 발생했었다. 이 문제는 해당 state에 순서변경마다 바뀌는 index를 state에 반영해주어 해결했다.
    - 저장해둔 데이터의 순서를 바꾸는 것이기 때문에 db에는 지장이 없고, 저장 버튼을 통해 변경된 순서의 pk를 전달하여 db에 반영되는 방식으로 제작했다.
  
### 배운점   
- 보여주는 데이터의 순서를 바꾸고 취소하거나 저장이 필요할 때는 state를 통해 리렌더링과 함께 순서를 저장할 수 있다. 또한 map을 돌릴 변수를 괄호를 통해 분기처리할 수 있다.
- 순서를 바꾸고 싶을 때 배열을 변경하는 방식으로 쉽게 구현할 수 있다(예: unshift(), push(), splice(), slice()등을 이용)

## 3월 25일

### 작업  
더보기 버튼으로 데이터 불러오기
 
### 문제점 발견 및 해결
특정 게시물의 리스트를 더보기 버튼을 통해 새로운 데이터를 가져오는 도중 useInfiniteQuery를 사용해 받아와야했다. 이 와중에 getNextPageParam를 이용해 다음 페이지를 가져오는 부분에서 헤매고 있었다.    


  - 해결
    - 인자로 현재 페이지와 지금까지 받아온 페이지를 전달 받을 수 있다는 것을 통해 아래와 같이 로직을 제작할 수 있었다. api에서 요청 파라미터가 page였기 때문에 nextPage에서 아래와 같이 지금까지 받아온 페이지에서 1을 더한 페이지 수를 요청했다.
  ```
   getNextPageParam: (_lastPage, allPages) => {
    const nextPage = allPages.length + 1;
    if (_lastPage.data.data.is_page_ended === false) {
      return nextPage;
    } else {
      return undefined;
    }
  },
```    
### 배운점   
- 더보기를 구현할 때 서버쪽에서 page별로 데이터를 나누는 작업도 필요하고 다음 페이지에 값이 있는지 없는지도 판별해서 전달해주어야했다.

## 3월 26일

### 작업  
리스트 중에 클릭한 리스트와 관련된 데이터를 모달로 불러오기(api는 리스트를 불러올 때 한 번)
 
### 문제점 발견 및 해결
회원 리스트를 제작하고 특정 회원을 클릭했을 때 해당 회원의 데이터를 모달의 input에 반영해야했는데 props를 통해 반영은 되었지만 새로고침 시 모달이 사라지고 url만 남아있는 문제가 있었다.


  - 해결
    api를 불러오는 것이 아니기 때문에 클릭했던 데이터가 남아있을 수 없어 일어난 문제였다. 페이지를 첫 로드했을 때 modal 관련 query string이 있을 경우 query string을 제거하도록 구현했다.(현재는 modal외에는 query string을 사용한 것이 없어서 빈 값으로 페이지를 이동시켜 query string만 사라지도록 했다.
  ```
   useEffect(() => {
    if (searchParams.get('modal')) {
      navigate('');
    }
  }, []);
```    
### 배운점   
- 빈 값으로 navigate를 할 경우 현재의 location만 남는다.('member' 와 '/member'가 서로 다른 것을 기억하면 된다)

## 3월 29일

### 작업  
우측 배너 제작
 
### 문제점 발견 및 해결
우측배너를 레이아웃에 맞추어 배치하는 동시에 반응형으로 구현해야했지만 absolute와 100%를 가지고 구현하는데 어려움을 겪었다.


  - 해결
    - 컨텐츠의 우측에 배치하기 위해 absolute와 left: 100% 를 이용해 컨텐츠를 넘어간 우측 위치에 배너를 배치한다. max-width를 통해 너비를 제한하고 width: 100%로 구현했다.
    - width: 100%로 인해 컨텐츠를 넘어서 scroll-x가 나타나는 문제가 발생하여 컨테이너의 max-width를 calc를 이용하여 컨텐츠, 좌우 여백을 제거하여 길이를 작성했다.
 
### 배운점   
- 컨텐츠를 넘어 우측에 배치하고 싶다면 left: 100%로 쉽게 해결이 가능하다.
- calc를 이용해 반응형에 필요한 불특정한 길이의 width문제를 해결할 수 있다.


