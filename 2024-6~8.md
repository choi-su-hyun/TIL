# 2024년 6월 ~ 8월  

## 6월 2일

### 작업  
 첫 렌더링 시 swiper 슬라이드의 특정 슬라이드로 이동시키기
 
### 문제점 발견 및 해결
슬라이더 내에 날짜 값과 현재 날짜 값을 비교해서 첫 렌더링 시 오늘 날짜의 슬라이드가 활성화되도록 변경이 필요했다. 하지만 react 컴포넌트에 대한 설명은 부족했고, 직접 swiper 객체를 만들어 구현하는 것이 일반적인 것으로 보였다.   

  - 해결   :
  onSwiper 속성을 통해 setState를 넣어주어 현재 swiper 객체를 state에 저장하는 것으로 해결이 가능했다. 객체를 저장하고 useEffect 내에서 객체 메소드를 이용해 원하는 슬라이드로 이동시켰다.

### 배운점   
react 전용으로 제공하는 라이브러리의 객체를 사용해야한다면 state에 저장이 가능한지 찾아보자.

## 6월 4일

### 작업  
 검색 바 클릭 시 스크롤 이동 구현
 
### 문제점 발견 및 해결
focus가 되었을 때 스크롤을 시켜야하지만 검색바에 딱 걸리도록 구현하는 것이 아닌 검색바에서 살짝 더 위로 스크롤 되도록 구현해야했다.

  - 해결 :
    window.scrollTo()에 top 키 값을 보내주어 해당 인자 만큼 이동하도록 구현할 수 있었다.

### 배운점   
window.scrollTo()를 이용해 스크롤 이동이 가능하다.

## 6월 5일

### 작업  
 byte 제한하는 input 만들기
 
### 문제점 발견 및 해결
byte의 갯수를 계산했지만 특정 byte를 넘어가도 끝까지 작성되는 문제가 발생했다. slice를 통해 잘라냈지만 한 번만 적용될 뿐 다시 작성시   
byte가 쉽게 넘어갔다.

  - 해결 :
     특정 byte를 넘어서는 경우 slice를 한 번만 해서 문제였다. 한글은 3byte 영어는 1byte이기 때문에 이것에 맞춰 현재 작성중인 문자열의
    byte 수가 크다면 한 글자씩 제거해가는 방식으로 구현해야했다.

### 배운점   
- 특정 문자열의 byte를 계산해주는 정규식이 있다.
- slice(0,-1)을 통해 끝자리 제거한 문자열을 사용할 수 있다.

## 6월 6일

### 작업  
 인증번호 타이머 60초 남았을때/인증 실패했을 때 재전송할 수 있도록 변경하기
 
### 문제점 발견 및 해결
기존에 구현할 때 setinterval에 따라 타이머 숫자를 리렌더링하도록 하기 위해 interval 자체를 state에 넣고 그 안에서 60초보다 작을 경우에는 재전송이 가능하고 아닐 경우에는 재전송이 불가능하도록 구현했었다.   
하지만 이 상황에서 인증 실패 시 재전송을 가능하게 하려고하니 60초보다 적지 않은 이상 재전송을 할 수 없는 일이 벌어졌다.   

  - 해결 :
    조건문으로 60초 이상일 때 재전송 할 수 없도록 강제하는 것이 아니라 타이머가 시작할 때 한 번 재전송을 막고 타이머가 60초 아래일 때 재전송을 다시 켜주도록 변경하여 해결했다.
    또한 state에 setinterval을 직접넣게 되면서 복잡해진 코드를 useEffect를 이용해 setinterval로 time state가 변경되는 것을 감지해 해당 값을 리렌더링하도록 구현했다.

### 배운점   
- setInterval을 사용할 경우 리렌더링이 되기 위해서는 setInterval만 만들면되는 것이 아닌 상태 값에 따라 리렌더링이 될 수 있도록 해야한다. 하지만 state를 그냥 사용할 경우 전체페이지가 리렌더링되기 때문에 타이머가 이상하게 작동하게 된다. 이 때 useEffect를 이용해 타이머만 리렌더링 시키면 된다.
- setInterval을 통해 무언가의 상태를 변경해주어야한다면 interval 내에서 조작해주는 것이 아니라 밖에서 해당 값을 이용해 조건문을 작성해야한다. 그렇지 않으면 관련 상태나 변수를 자유롭게 컨트롤하기 어렵게 된다. 매 초마다 할당을 할 것이기 때문이다.

## 6월 7일

### 작업  
swiper loop 모드에서 원하는 슬라이드로 첫 렌더링시키기
 
### 문제점 발견 및 해결   
일부 슬라이드에서 한쪽에는 슬라이드가 없고 스와이프를 해야만 무한 스와이프로 변경되는 문제가 발생했다. loop를 위한 복제된 slide가 생성되기 전에 해당 위치로 보내지기 때문에 발생하는 것으로 보였다.

  - 해결 :
    slideTo를 통해 해당 슬라이드로 보내고 있었지만 렌더링 문제로인해 initialSlide를 통해 초기 값을 해당 슬라이더로 시작하도록 지정해주어 해결했다.
    또한 해당 슬라이드로 넘기는 값을 서버에서 받은 동적인 값을 사용하게 되면서 state를 이용하게 되었는데 state가 반영되지 않는 문제를 직면하게 되었고, 해당 state의 초기 값을 null로 주면서 null을 이용해 swiper를 렌더링 시키면서 값이 들어왔을 때만 swiper가 렌더링되도록 하여 해결했다.

### 배운점   
- swiper의 slideTo는 단순히 해당 슬라이드로 보내는 것이고, initialSlide는 해당 slide를 초기값으로 하여 swiper를 렌더링 시키는 것으로 loop를 기본적으로 사용하게 되는 프로젝트에서는 initialSlide가 더 좋은 선택지이다.
- 서버에서 받은 데이터를 state에 넣어서 적용시키고 싶지만 작동하지 않는다면 해당 state의 초기값을 null로 주면서 null이 아닌 경우에 렌더링시키면 서버에서 받은 값을 사용하도록 구현할 수 있다.

## 6월 9일

### 작업  
swiper의 슬라이드를 가장 긴 컨텐츠의 길이와 동일하게 유지시키기
 
### 문제점 발견 및 해결   
슬라이드의 내용물이 줄바꿈되면서 각 슬라이드의 길이가 달라지는 문제가 발생했다. swiper의 슬라이드가 flex 구조로 이루어져 있어 stretch를 이용해 해결하고자 했으나, stretch가 작동하지 않았다.

  - 해결 : 
    swiper에 기본적으로 slide의 높이가 100%로 정해져있는데 align-items: stretch의 경우 자식의 높이가 정해져있으면 작동하지 않는 속성이였다. 그래서 해당 swiper의 슬라이드의 height를 auto로 높이를 지정하지 않아 해결했다.

### 배운점   
- flex의 align-items로 자식 요소를 stretch 시킬 수 있다. 하지만 height가 지정되어있는 경우 stretch는 작동하지 않는다.

## 6월 10일

### 작업  
swiper 관련 오류 해결하기
 
### 문제점 발견 및 해결   
swiper를 이용해 구현해둔 슬라이더가 loop 속성을 걸었지만 loop속성이 작동하지 않았다. 또한 스와이프 시 간헐적으로 어색하게 slide가 되었다.

  - 해결 :
    - 이전에 작동이 잘되는 것을 확인했었는데 현재는 작동이 안되는 것을 보고 그때와 지금의 차이점인 slide 개수가 영향을 미친다는 것을 알 수 있었다. swiper의 github에 이슈내역을 살펴보고 centeredSlide 속성에서 loop가 활성화되어있는 경우 동일한 에러가 발생하고 있다는 것을 알 수 있었다.
      또한 에러 해결이 명확하게 되지 않는 것도 확인되어 우선 swiper를 최신버전으로 업데이트하자 slide가 스와이프 시 간헐적으로 에러가 발생하던 문제는 해결이 되었다.
    - 슬라이드가 4개보다 적은 경우에 에러가 발생하는 것을 확인하여, 서버에서 오는 데이터가 4개 보다 적을 경우 동일한 슬라이드들을 한 번 더 return 시켜주어 해결했다.
    - 리스트가 하나만 있는 경우 slidePerView가 1이 되도록 조건문으로 처리했다. 

### 배운점   
- 사용하는 라이브러리에서 문제가 발생한 경우 해당 라이브러리의 github 이슈 페이지에서 찾아보고 현재 상황을 파악해야한다.
- 라이브러리를 쉽게 업데이트 및 다운그레이드가 가능하다.

## 6월 11일

### 작업  
checkbox 컴포넌트 제작
 
### 문제점 발견 및 해결   
checkbox 컴포넌트를 사용중 event를 받는 경우와 받지 못하는 경우가 있어, 이에 맞춰 type을 정해주고 onChange를 사용하고자 했다. 
type문제로 onChange: (event?: React.ChangeEvent<HTMLInputElement>) => void 를 통해 이벤트를 받거나 받지 않는다고 명시해주었었다. 그리고 이에 맞춰 onChange={() => 함수명}으로 type에 맞도록 작성해주었다.   
하지만 에러도 발생하지않고, 아무런 반응도 하지 않았다.

  - 해결 :
    onchange에 이벤트를 받으려면 onChange={함수명} 이렇게 넣어주거나, onChange={(event)=> 함수명(event)} 와 같이 전달 받은 이벤트가 함수로 무사히 이동할 수 있도록 해주어야 한다. 문제 상황처럼 작성하게 되면, 이벤트가 전달되지 못하고 함수는 아무런 이벤트도 받지 못한채 작동하지 않게되는 것이다.

### 배운점   
- 컴포넌트 내에서 함수의 인자를 넘겨주어야하는 경우 해당 함수까지 인자가 잘 전달 되고 있는지 확인하며 작성해야한다.

## 6월 12일

### 작업  
요소의 크기에 따라 ...처리
 
### 문제점 발견 및 해결   
기본적으로 나와있는 css ...처리 방법에는 text-overflow: ellipsis 등을 이용하는 방법이 있다. 하지만 width를 정해주지 않으면 작동하지 않는다.(100%는 작동하지 않음) 그러나 반응형 작업을 위해 width를 100%로 지정해주어야하는 상황이 주어졌었다.

  - 해결
    한 줄의 경우에는 위와 같이 text-overflow: ellipsis를 사용하지만 한 줄의 경우에도 -webkit-line-clamp: 1 를 이용하여 구현하게 되면 width가 100%라도 이에 맞춰 작동한다.

## 6월 13일

### 작업  
서버 값에 따라 토글 컴포넌트 클릭 시 alert 띄우기
 
### 문제점 발견 및 해결   
'노출', '미노출'을 설정할 수 있는 토글 버튼에서 서버의 데이터를 받아 게시물들 중 4개 이상의 게시물이 '노출'상태인 경우 더 이상 노출을 할 수 없도록 구현해야했지만 토글은 컴포넌트로 제작되어있었고, 데이터는 현재 페이지에서 호출하는 것이 권장되었다.

  - 해결 :
    서버의 데이터 값에 따라 alert창을 렌더링하고, 막아야하는 설정 버튼을 넣으면 해당 설정 버튼 상태로 변경되는 경우에만 alert가 뜰 수 있도록 구현했다. 여기서는 클릭된 값이 '노출'일 경우 alert이 뜨도록 구현했다.

### 배운점   
- api 자체를 컴포넌트에서 호출해야할 것 같았지만 해당 페이지에서 호출하고 그 값에 따라 해당 토글에 alert창을 렌더링하거나 제거하여 컴포넌트를 컴포넌트로써의 역할만 할 수 있도록 구현할 수 있었다.   
또한 다른 데이터를 통해 구현하더라도 alert창을 띄우고 설정 버튼 또한 정해진 값이 아닌 props로 구현하여 다른 페이지에서도 쉽게 사용할 수 있도록 구현이 가능하다는 것을 알 수 있었다.
- 서버에서 받은 값을 컴포넌트에 넘겨주어 분기처리가 가능하다.

## 6월 14일

### 작업  
관리자에서 올린 이미지 비율이 망가지는 문제 해결하기
 
### 문제점 발견 및 해결   
이미지에 width와 height를 100%로 두고 이미지를 서버에서 받아 보여주니 이미지의 비율이 망가지는 문제가 발생했다. object-fit을 이용해 수정하고자 했지만 이미지가 잘리거나 너무 작아졌다.

  - 해결 :
    aspect-ratio를 이용해 비율을 맞춰주어 어느정도 해결이 가능하다. 하지만 img만 놓고 aspect-ratio를 맞춰줄 경우 다른 레이아웃을 망가뜨리는 문제가 발생한다.
    그러므로 이미지를 wrap으로 한 번 감싸두어 다른 레이아웃을 침범하지 않는 선에서 비율이 유지되도록 반영하여 해결했다.

### 배운점   
- aspect-ratio를 사용하기 위해서는 wrap으로 감싸고, 레이아웃을 잘 관리해주어야한다.
- 관리자페이지 내에서도 적절한 이미지를 넣을 수 있도록 안내를 해줄 수 있어야 한다.

## 6월 17일

### 작업  
웹앱 푸시를 위한 fcm 토큰 전송 구현하기
 
### 문제점 발견 및 해결   
프로젝트를 진행하던 중 첫 설치 시 권한 설정 시 전달 받은 토큰을 로그인 시 서버에 넘겨주어야 했다.

  - 해결 :
    fcm 토큰을 전달 받는 코드가 2가지가 있었다. 첫 설치 시 팝업을 통해 전달 받는 함수, 매번 접속할 때마다 코드를 전달 받는 함수로 전달 받는 것이다.
    

### 배운점   
- 웹앱에서 fcm 토큰이 전달되는 방식


## 6월 18일

### 작업  
모달창에서 수행해야할 로직을 경고 모달을 띄워 한 번더 확인시킨 후 모달 활용하기
 
### 문제점 발견 및 해결   
특정 글을 모달창에서 작성하도록 구현 후 저장은 경고 모달을 한 번더 띄워서 확인 후 api를 호출하도록 해야했다.   
하지만 기존에 사용하는 모달을 재사용하려고 하니 기존의 모달과 겹치는 일이 발생하면서 해당 모달을 띄우려면 등록에 사용하는 모달을 제거해야하는 문제가 발생했다.   
이렇게 되면 모달 내에서 작성한 값이 사라지게 된다.(렌더링을 하지 않으니까 상태 값이 사라지기 때문이다.)

  - 해결 :
    경고 모달이라는 새로운 모달을 생성하여 모달 위에 새로운 모달을 띄우도록 구현하고 해당 경고 모달에 작성한 글을 등록하는 api를 호출하는 함수를 props로 넘겨주어 해결했다. 이렇게 되면 모달을 끄고 싶을 때 뒤로가기가 아닌 링크로 넣어주면 모든 모달을 끌 수 있도록 구현할 수 있지만 해당 업무에서는 전체가 사라지는 구조가 아닌 해당 경고 모달만 사라지도록 하기 때문에 문제 없이 해결할 수 있었다.
    

### 배운점   
- api호출을 모달에서 실행하고 싶다면, 모달에서 정의하는 것이 아니라 해당 함수만 넘겨주면 된다.
- 모달이 있더라도 경고 모달은 따로 만들어주는 것이 좋다(분리 되어있어야 더 자유도 있게 활용할 수 있다.


## 6월 20일

### 작업  
배너 이미지 버그 상세페이지에서 이미지를 수정할 수 없는 버그 수정하기
 
### 문제점 발견 및 해결   
배너의 상세페이지에서 이미지를 수정하려고 했지만 preview 이미지 옆에 preview 이미지를 비워주는 버튼을 생성 후 해당 버튼을 통해 preview 이미지를 제거하려고 했지만 제거가 되는 듯 깜빡이기만 하고 반영이 되지 않았다. 그래서 어디선가 useEffect로 다시 넣어주고 있는 문제라고 인식하고 접근했지만 useEffect에는 해당 값과 관련된 문제가 없었다.

  - 해결 :
    우선 console을 통해 값이 제대로 들어가는지 부터 확인했다. 객체 배열에서 특정 값인 preview.image값을 비워주면 되었는데 신기하게도 console을 확인하니 명확하게 잘 비워주고 있었다.
    그래서 리렌더링의 문제가 아닐까하는 생각을 하게 되었고, 깊은 복사 관련 불변성을 잘 지켜주고 있는지 확인해보았다. ...spread operator를 통해 복사를 하고 있는 것을 보았고, JSON.parse(JSON.stingyfy())를 통해 깊은 복사를 하여 문제를 해결했다. 
    

### 배운점   
- 반복문을 통해 ...spread operator를 이용하여 깊은 복사를 진행할 수 있다.
- useEffect 관련 문제인지 확인해보았다면 console을 통해 해당 값을 따라가며, 어디서 문제가 일어나고 있는지 확인해보아야한다.
- 2단계 깊은 복사를 진행해야하는 경우라면 ...spread operator로는 반복문을 사용하거나 JSON관련 메소드를 사용해야한다.

## 6월 23일

### 작업  
api 요청 axios 모듈화
 
### 문제점 발견 및 해결   
회사에서 axios를 그냥 사용하는 것이 아닌 모듈화를 통하여 사용하는 것을 보고 더 간단하게 사용하는 방법을 배울 수 있었다. 기존에는 usequery를 해당 컴포넌트에서 가져와서 사용했기 때문에 query key의 중요성을 인식하지 못했는데 이번에 모듈화하여 진행하면서 query key로 해당 데이터 업데이트, query key에 인자를 넣어주어 query key에 따라   
데이터를 새로고침 시킬 수 도 있었다.

### 배운점   
- 기존에는 usequery를 해당 컴포넌트에서 직접 불러와서 사용했지만 모듈화하여 더 간편하게 사용하는 것이 api 관리에도 좋다.
- query key로 데이터 관리하기

## 6월 24일

### 작업  
admin 페이지에서 편집기로 입력한 데이터를 사용자 페이지에서 원하는대로 보여주기
 
### 문제점 발견 및 해결   
편집기를 구현한 후 해당 편집기를 통해 작성한 데이터를 사용자페이지에서 배치해야했는데 기본적으로 reset css를 통해 관련 css를 제거해주게 되면서 관리자가 작성한 대로 css를 반영해줄 수 없었다. 그렇다고 해제하자니 달라지는 것이 너무 많았다.

  - 해결 :
    특정 css class를 만들어 해당 클래스 내에서의 태그들은 기존의 html 명령을 따르도록 구현했다. 컬러까지 반영시키지는 못했지만 편집기로 작성한 데이터를 받은 곳 내에서만 관리자가 스타일한대로 나타나도록 구현할 수 있었다.
    또한 편집기로 작성했지만 스타일이 들어가서는 안되는 부분은 클래스를 제거하여 해결했다. 하지만 다음번에는 구지 편집기를 사용하지 않아도 되는 것이니 기획자와 이야기하여 일반적인 textarea를 이용해 구현하는 것이 더 좋겠다.
    

### 배운점   
- 편집기를 사용할 경우 작성하는 곳 뿐만 아니라 작성을 통해 보여지는 곳을 어떻게 처리할 것인지도 고민해볼 수 있어야 한다. (다른 부분에서도 응용해볼 수 있겠다)

## 6월 26일

### 작업  
다운로드 웹앱 구현
 
### 문제점 발견 및 해결   
데스크탑 환경에서 다운로드는 form을 전송하는 형태를 이용해 다운로드 시킬 수 있었다. 하지만 앱 개발자와 소통해본 결과 이 방식으로는 앱에서는 다운로드를 진행할 수 없는 것으로 보였다.

  - 해결 :
    앱 쪽에서 호출해주는 함수와 결과를 전달해주는 함수를 만들어서 다운로드 클릭 시 다운받아야할 파일의 url을 넘겨주었다. 그리고 앱 쪽에서 파일을 다운로드 처리시켜주어 특정 위치로 저장시키고 성공 및 실패와 관련된 결과를 함수로 전달받아 사용자에게 피드백을 해줄 수 있었다.
    

### 배운점   
- 웹 앱의 경우 다운로드 부분은 앱쪽에서 추가 작업이 필요하다.

## 6월 27일

### 작업   
관리자 권한 접근 막기
 
### 문제점 발견 및 해결   
이미 구현되어 있는 권한마다 페이지 접근을 막는 코드를 사용해야했지만 삼항연산자로 되어 있어 어디가 잘 못 되었는지 인식하기가 어려웠다.   
또한 주석도 알아보기 어려웠다.

  - 해결 :
    삼항 연산자를 일반적인 조건문으로 변경하여 알아보기 쉽게 변경했다. 또한 else가 아닌 return을 이용해 로직을 더 알기 쉽게 변경했다.
    처음에는 권한을 막아야하는 문제를 쉽게 해결하기 어려웠지만 접근을 막아야 하는 페이지 및 권한을 명확하게 정리하면서 해결 할 수 있었다.
    

### 배운점   
- 삼항 연산자 사용 시 이 길어지면 일반적인 조건문으로 변경하는 것이 가독성과 함께 시간을 절약할 수 있다.
- 무언가 명확하지 않다면 주석을 통해서 명확하게 구분지어 주는 것이 필요하다. 
